/**
 * Styles optimisés pour maintenir le header visible malgré le clavier virtuel
 * Ces styles se concentrent spécifiquement sur la résolution des problèmes mobiles
 * liés à l'ouverture du clavier virtuel
 */

/* Assurer que le header reste fixe en haut */
#kora-header-container {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 9999 !important;
  width: 100% !important;
  transform: translateZ(0);
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  will-change: transform;
  transition: transform 0.2s ease-out;
}

/* Assurer que le header ne disparaît pas lors du focus d'un input */
body.keyboard-open #kora-header-container {
  position: fixed !important;
  top: 0 !important;
  transform: translateY(0) !important;
  z-index: 9999 !important;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
}

/* Prévenir le défilement automatique du body sur iOS */
body.keyboard-open {
  position: relative;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
  height: var(--app-height);
}

/* Ajustements spécifiques à iOS */
.ios-device.keyboard-open #kora-header-container {
  /* Forcer l'application du GPU pour éviter les bugs visuels sur iOS */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Ajustements spécifiques à Android */
.android-device.keyboard-open #kora-header-container {
  position: fixed !important;
  top: 0 !important;
  will-change: transform;
}

/* Styles pour les navigateurs spécifiques sur Android */
.android-device.chrome-browser.keyboard-open #kora-header-container {
  /* Fixes pour Chrome sur Android */
  position: fixed !important;
  transform: translateY(0) !important;
}

.android-device.samsung-browser.keyboard-open #kora-header-container {
  /* Fixes pour Samsung Browser */
  z-index: 9999 !important;
}

/* Style pour les positions d'écrans iPad en orientation portrait/paysage */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
  #kora-header-container {
    /* Style spécifique pour iPad */
    position: fixed !important;
    top: 0 !important;
  }
}

/* Prévenir les problèmes avec les transitions CSS sur le header */
@media screen and (max-width: 767px) {
  body.scrolling #kora-header-container {
    transform: translateY(0) !important;
    transition: none !important;
  }
}